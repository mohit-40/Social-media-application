{"version":3,"sources":["redux/User/userType.js","redux/User/userReducer.js","redux/Following/followingType.js","redux/Following/followingReducer.js","redux/Socket/socketType.js","redux/Socket/socketReducer.js","redux/rootReducer.js","redux/store.js","requestMethod.js","component/Conversation/Conversation.jsx","component/Message/Message.jsx","component/Online/Online.jsx","redux/Following/followingAction.js","component/notificationItem/NotificationListItem.jsx","component/Topbar/Topbar.jsx","redux/User/userLogoutAction.js","pages/Chat/Chat.jsx","pages/Error/Error.jsx","component/CloseFriend/CloseFriend.jsx","component/Sidebar/Sidebar.jsx","firebase/firebase.js","component/Share/Share.jsx","component/postCommentItem/PostCommentItem.jsx","component/ListModalListItem/ListModalListItem.jsx","component/LikeModal/LikeModal.jsx","component/Post/Post.jsx","component/Feed/Feed.jsx","component/Rightbar/Rightbar.jsx","pages/Home/Home.jsx","pages/Login/Login.jsx","redux/User/userLoginAction.js","component/UpdateProfileBtn/UpdateProfileBtn.jsx","component/ProfileRightbar/ProfileRightbar.jsx","pages/Profile/Profile.jsx","redux/User/userRegisterAction.js","pages/Register/Register.jsx","component/UserItem/UserItem.jsx","pages/FriendPage/FriendPage.jsx","pages/UpdateInfo/UpdateInfo.jsx","App.jsx","redux/Socket/socketAction.js","index.js"],"names":["LOGIN_START","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT_START","LOGOUT_SUCCESS","LOGOUT_FAIL","REGISTER_START","REGISTER_SUCCESS","REGISTER_FAIL","initialUserState","currentUserId","isLoading","error","userReducer","state","action","type","payload","FOLLOW","UNFOLLOW","UPDATE_FOLLOWING","followingInitialState","usersId","followingReducer","filter","uid","SET_SOCKET","initialSocketState","socket","socketReducer","persistConfig","key","storage","whitelist","rootReducer","combineReducers","user","following","persistReducer","store","createStore","composeWithDevTools","applyMiddleware","thunk","persistor","persistStore","BASE_URL","publicRequest","axios","create","baseURL","userRequest","refreshToken","a","REFRESH_TOKEN","localStorage","getItem","getState","post","res","setItem","data","accessToken","console","log","interceptors","request","use","config","ACCESS_TOKEN","headers","jwtDecode","decodedToken","currentDate","Date","exp","getTime","Promise","reject","Conversation","conversation","useSelector","useState","setUser","PF","process","useEffect","friendId","members","find","m","getUser","get","className","src","profilePicture","alt","name","Message","message","own","fetchUser","senderId","textMessage","format","createdAt","Online","userId","setCurrConversation","handleClick","body","receiverId","_id","onClick","follow","unfollow","updateFollowing","followings","NotificationListItem","n","text","Topbar","dispatch","useDispatch","currentUser","setCurrentUser","search","setSearch","allUsers","setAllUsers","fetchAllUsers","notification","setNotification","displayNotification","setDisplayNotification","messages","setMessages","on","length","showMenu","setShowMenu","to","style","fontSize","Search","id","placeholder","onChange","e","target","value","toLowerCase","includes","slice","map","username","Notifications","display","Chat","emit","removeItem","conversations","setConversations","currConversation","newMessage","setNewMessage","scrollRef","useRef","onlineFriend","setOnlineFriend","dynamicMessage","setDynamicMessage","chatSearch","setChatSearch","some","fetchFollowings","prev","users","f","u","fetchConversations","fetchMessages","handleSend","preventDefault","conversationId","member","current","scrollIntoView","behavior","showChatRightbar","setShowChatRightbar","showChatSidebar","setShowChatSidebar","window","innerWidth","ref","onSubmit","cols","rows","Refresh","Error","statusCode","CloseFriend","Sidebar","loaded","setLoaded","fetchFollowing","showSidebar","setShowSidebar","RssFeed","PersonAdd","followingId","pathname","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","Share","posts","setPosts","useHistory","desc","setDesc","file","setFile","progress","setProgress","preview","setPreview","makePost","setMakePost","handleSubmit","newPost","fileName","now","put","snapshot","Math","round","bytesTransferred","totalBytes","child","getDownloadURL","then","imgurl","img","setTimeout","Cancel","htmlFor","PermMedia","htmlColor","accept","files","reader","FileReader","onloadend","result","readAsDataURL","Label","textDecorationLine","Room","EmojiEmotions","PostCommentItem","c","deleteComment","ListModalListItem","likeModal","props","Modal","size","centered","Header","closeButton","Title","likes","Body","l","Footer","Button","onHide","Post","like","setLike","isLike","setIsLike","handleLike","isDeleted","setIsDeleted","handleDelete","delete","p","postComment","setPostComment","fetchComment","comment","setComment","displayComment","setDisplayComment","handleSendComment","postId","cid","modalShow","setModalShow","MoreVert","color","LikeModal","show","Feed","timeline","ac","AbortController","fetchPosts","sort","p1","p2","abort","Rightbar","fid","showRightbar","setShowRightbar","Home","Login","email","password","userState","history","login","push","disabled","CircularProgress","UpdateProfileBtn","params","useParams","profilePic","setProfilePic","coverPic","setCoverPic","call","updatedUser","coverPicName","uploadTask","coverPicture","location","reload","profilePicName","ProfileRightbar","followers","followed","setFollowed","setFollowings","setFollowers","handleFollow","res1","res2","work","school","from","live","relationship","birthday","followerId","Profile","register","userDetail","Register","comfirmPassword","otp","otpSend","setOtpSend","otpVerified","setOtpVerified","otpCounter","setOtpCounter","setError","handleSendOtp","myInterval","setInterval","clearInterval","handleVerifyOtp","response","required","minLength","UserItem","FriendPage","useLocation","split","userName","displayUsers","setDisplayUsers","fetchAllUser","UpdateInfo","updated","setUpdated","defaultValue","App","io","setSocket","path","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.bf563995.chunk.js","sourcesContent":["export const LOGIN_START= \"LOGIN_START\"\r\nexport const LOGIN_SUCCESS=\"LOGIN_SUCCESS\"\r\nexport const LOGIN_FAIL=  \"LOGIN_FAIL\"\r\n\r\nexport const LOGOUT_START= \"LOGOUT_START\"\r\nexport const LOGOUT_SUCCESS=\"LOGOUT_SUCCESS\"\r\nexport const LOGOUT_FAIL=  \"LOGOUT_FAIL\"\r\n\r\nexport const REGISTER_START= \"REGISTER_START\"\r\nexport const REGISTER_SUCCESS=\"REGISTER_SUCCESS\"\r\nexport const REGISTER_FAIL=  \"REGISTER_FAIL\"\r\n","import { LOGIN_FAIL, LOGIN_START, LOGIN_SUCCESS ,LOGOUT_FAIL, LOGOUT_START, LOGOUT_SUCCESS, REGISTER_FAIL, REGISTER_START, REGISTER_SUCCESS } from \"./userType\"\r\nconst initialUserState={\r\n\tcurrentUserId: null,\r\n\tisLoading:false,\r\n\terror:false\r\n}\r\n\r\nconst userReducer=(state=initialUserState , action)=>{\r\n\tswitch (action.type) {\r\n\t\tcase REGISTER_START: \r\n\t\tcase LOGIN_START: return {\r\n\t\t\t...state,\r\n\t\t\tcurrentUserId:null,\r\n\t\t\tisLoading:true,\r\n\t\t\terror:false\r\n\t\t}\r\n\t\tcase REGISTER_SUCCESS: \r\n\t\tcase LOGIN_SUCCESS: return {\r\n\t\t\t...state,\r\n\t\t\tcurrentUserId: action.payload,\t\t\t\r\n\t\t\tisLoading:false,\r\n\t\t\terror: false\r\n\t\t}\r\n\t\tcase REGISTER_FAIL: \r\n\t\tcase LOGIN_FAIL: return {\r\n\t\t\t...state,\r\n\t\t\tcurrentUserId:null,\r\n\t\t\tisLoading:false,\r\n\t\t\terror:true\r\n\t\t}\r\n\r\n\t\t\r\n\t\tcase LOGOUT_START: return {\r\n\t\t\t...state,\r\n\t\t\tisLoading:true,\r\n\t\t\terror:false\r\n\t\t}\r\n\t\tcase LOGOUT_SUCCESS: return {\r\n\t\t\t...state,\r\n\t\t\tcurrentUserId: null,\t\t\t\r\n\t\t\tisLoading:false,\r\n\t\t\terror: false\r\n\t\t}\r\n\t\tcase LOGOUT_FAIL: return {\r\n\t\t\t...state,\r\n\t\t\tisLoading:false,\r\n\t\t\terror:true\r\n\t\t}\r\n\t\t\r\n\t\tdefault: return state\t\r\n\t}\r\n}\r\n\r\nexport default userReducer","export const FOLLOW=\"FOLLOW\"\r\nexport const UNFOLLOW=\"UNFOLLOW\"\r\nexport const UPDATE_FOLLOWING=\"UPDATE_FOLLOWING\"\r\n","import { FOLLOW, UNFOLLOW, UPDATE_FOLLOWING } from \"./followingType\";\r\n\r\nconst followingInitialState= {\r\n\tusersId:[]\r\n}\r\nconst followingReducer = (state = followingInitialState , action)=>{\r\n\tswitch (action.type) {\r\n\t\tcase FOLLOW:return({\r\n\t\t\tusersId: [...state.usersId , action.payload]\r\n\t\t})\r\n\t\tcase UNFOLLOW : return({\r\n\t\t\tusersId: state.usersId.filter((uid)=> uid !== action.payload)\r\n\t\t})\r\n\t\tcase UPDATE_FOLLOWING : return({\r\n\t\t\tusersId: action.payload\r\n\t\t})\r\n\t\tdefault : return state\r\n\t}\r\n}\r\nexport default followingReducer;\r\n","export const SET_SOCKET = \"SET_SOCKET\"\r\n","import { SET_SOCKET } from \"./socketType\";\r\n\r\nconst initialSocketState = {\r\n\tsocket:null\r\n}\r\nconst socketReducer = (state = initialSocketState , action)=>{\r\n\tswitch (action.type) {\r\n\t\tcase SET_SOCKET: return({\r\n\t\t\tsocket:action.payload\r\n\t\t})\r\n\t\tdefault:return state;\r\n\t}\r\n}\r\nexport default socketReducer;","import { combineReducers } from \"redux\";\r\nimport userReducer from \"./User/userReducer\"\r\nimport followingReducer from \"./Following/followingReducer\"\r\nimport socketReducer from \"./Socket/socketReducer\"\r\nimport { persistReducer } from \"redux-persist\"\r\nimport storage from \"redux-persist/lib/storage\"\r\n\r\nconst persistConfig = {\r\n\tkey: 'root',\r\n\tstorage,\r\n\twhitelist: [\"user\"]\r\n}\r\n\r\nconst rootReducer = combineReducers({\r\n\tuser: userReducer,\r\n\tfollowing: followingReducer,\r\n\tsocket: socketReducer\r\n})\r\n\r\nexport default persistReducer(persistConfig, rootReducer);","import { createStore } from 'redux'\r\nimport rootReducer from \"./rootReducer\";\r\nimport { applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk'\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\n\r\nimport {persistStore} from \"redux-persist\"\r\n\r\n\r\nconst store = createStore(rootReducer, composeWithDevTools(applyMiddleware(thunk)))\r\nconst persistor = persistStore(store)\r\nexport { store , persistor}\t\r\n","// make axios intance so that no need to pass hearder:authorization again and again \r\n\r\nimport axios from \"axios\";\r\nimport { store } from \"./redux/store\";\r\nimport jwtDecode from 'jwt-decode'  \r\n\r\n\r\nlet BASE_URL=\"http://localhost:8800/api\"\r\nif(process.env.NODE_ENV ===\"production\"){\r\n\tBASE_URL = \"https://socialifyapp.herokuapp.com/api/\";\r\n}\r\nexport const publicRequest = axios.create({ baseURL: BASE_URL })\r\nexport const userRequest = axios.create({ baseURL: BASE_URL })\r\n\r\n\r\n// interceptor code \r\nconst refreshToken = async () => {\r\n\ttry {\r\n\t\tconst REFRESH_TOKEN = localStorage.getItem(\"refreshToken\");\r\n\t\tconst state = store.getState();\r\n\t\tconst currentUserId = state.user.currentUserId;\r\n\t\tconst res = await publicRequest.post(\"/auth/refresh/\" + currentUserId, { refreshToken: REFRESH_TOKEN });\r\n\t\tlocalStorage.setItem(\"accessToken\", res.data.accessToken)\r\n\t\tconsole.log(\"accesstoken updated\")\r\n\t\treturn res.data;\r\n\t} catch (err) {\r\n\t\tconsole.log(err);\r\n\t}\r\n};\r\n\r\nuserRequest.interceptors.request.use(\r\n\tasync (config) => {\r\n\t\tconst ACCESS_TOKEN = localStorage.getItem(\"accessToken\")\r\n\t\tconfig.headers[\"authorization\"] = \"Bearer \" + ACCESS_TOKEN;\r\n\t\t\r\n\t\tconst decodedToken = await jwtDecode(ACCESS_TOKEN);\r\n\t\tlet currentDate = new Date();\r\n\t\tif (decodedToken.exp * 1000 < currentDate.getTime()) {\r\n\t\t\tconst data = await refreshToken();\r\n\t\t\tconfig.headers[\"authorization\"] = \"Bearer \" + data.accessToken;\r\n\t\t}\r\n\t\treturn config;\r\n\t},\r\n\t(error) => {\r\n\t\treturn Promise.reject(error)\r\n\t}\r\n);\r\n","import React, { useEffect, useState } from 'react' \r\nimport \"./Conversation.css\"\r\nimport { useSelector } from 'react-redux'\r\nimport { userRequest } from '../../requestMethod'\r\n\r\nfunction Conversation({ conversation }) {\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\t// fetched currentUser\r\n\r\n\tconst [user, setUser] = useState()\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\r\n\t// friend of conversation With\r\n\tuseEffect(() => {\r\n\t\tconst friendId = conversation.members.find( m => m !== currentUserId);\r\n\t\tconst getUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + friendId);\r\n\t\t\t\tsetUser(res.data);\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t};\r\n\t\tgetUser();\r\n\t}, [currentUserId, conversation]);\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"conversation\">\r\n\t\t\t<img src={user?.profilePicture ? user?.profilePicture : PF + \"/person/noAvatar.png\"} alt=\"img\" className=\"conversation-img\" />\r\n\t\t\t<span className=\"conversation-name\">{user?.name}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Conversation\r\n","\r\nimport React, { useEffect, useState } from 'react'\r\nimport \"./Message.css\"\r\nimport { format } from \"timeago.js\" \r\nimport { userRequest } from '../../requestMethod'\r\n\r\nfunction Message({message,own}) {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst [user, setUser] = useState();\r\n\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser=async ()=>{\r\n\t\ttry {\r\n\t\t\t\tconst res= await userRequest.get(\"/users?userId=\" + message.senderId)\t\t\r\n\t\t\t\tsetUser(res.data)\t\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\t\t\r\n\t},[message])\r\n\r\n\r\n\treturn ( \r\n\t\t<div className={own ? \"message own\" : \"message\"}>\r\n\t\t\t<div className=\"message-top\">\r\n\t\t\t\t<img src={user?.profilePicture? user.profilePicture : PF +\"/person/noAvatar.png\" } alt=\"\" className=\"message-img\"/>\r\n\t\t\t\t<p className=\"message-text\">{message.textMessage}</p>\r\n\t\t\t</div>\r\n\t\t\t<div className=\"message-bottom\">\r\n\t\t\t\t{format(message.createdAt)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Message\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport \"./Online.css\"\r\nimport { userRequest } from '../../requestMethod';\r\n\r\nfunction Online({ userId, setCurrConversation }) {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst [user, setUser] = useState()\r\n\tconst currentUserId = useSelector(state => state.user.currentUserId)\r\n\t// fetch user \r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + userId)\r\n\t\t\t\tsetUser(res.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser()\r\n\t}, [userId])\r\n\r\n\r\n\t//fetch or create conversation \r\n\tconst handleClick = async () => {\r\n\t\tconst body = {\r\n\t\t\tsenderId: currentUserId,\r\n\t\t\treceiverId: user._id\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst res = await userRequest.post(\"/conversations/\"+currentUserId, body)\r\n\t\t\tsetCurrConversation(res.data[0])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t//render \r\n\r\n\r\n\treturn (\r\n\t\t<div onClick={handleClick} >\r\n\t\t\t<li className=\"online-friend\">\r\n\t\t\t\t<img src={user?.profilePicture ? user.profilePicture : PF + \"/person/noAvatar.png\"} alt=\"\" />\r\n\t\t\t\t<span className=\"online-friend-badge\"></span>\r\n\t\t\t\t<span className=\"name\">{user?.name}</span>\r\n\t\t\t</li>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Online\r\n","import { FOLLOW, UNFOLLOW, UPDATE_FOLLOWING } from \"./followingType\";\r\n\r\nexport const follow=(userId)=>({\r\n\ttype:FOLLOW,\r\n\tpayload: userId\r\n})\r\nexport const unfollow=(userId)=>({\r\n\ttype:UNFOLLOW,\r\n\tpayload : userId\r\n})\r\nexport const updateFollowing=(followings)=>({\r\n\ttype:UPDATE_FOLLOWING,\r\n\tpayload : followings\r\n})\r\n\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react';\r\nimport { userRequest } from '../../requestMethod';\r\nimport \"./NotificationListItem.css\"\r\nfunction NotificationListItem({ n }) {\r\n\tconst [user , setUser ] = useState(null);\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser =async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + n?.senderId)\r\n\t\t\t\tsetUser(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser(); \r\n\t},[n])\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<li className='notificationListItem'>\r\n\t\t\t\t<div className=\"notificationImgContainer\">\r\n\t\t\t\t\t<img src={user?.profilePicture} alt=\"img\" className='notificationImg' />\r\n\t\t\t\t</div>\r\n\t\t\t\t{user?.name} {n?.text}\r\n\t\t\t</li>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default NotificationListItem\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport { Search, Person, Chat, Notifications } from \"@material-ui/icons\";\r\nimport \"./Topbar.css\"\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { logout } from \"../../redux/exportAllAction\"\r\nimport { userRequest } from '../../requestMethod';\r\nimport NotificationListItem from '../notificationItem/NotificationListItem';\r\n\r\nfunction Topbar() {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\t//fetching reduxState\r\n\tconst dispatch = useDispatch();\r\n\tconst socket = useSelector(state => state.socket.socket);\r\n\tconst currentUserId = useSelector(state => state.user.currentUserId)\r\n\tconst [currentUser, setCurrentUser] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + currentUserId);\r\n\t\t\t\tsetCurrentUser(res.data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [currentUserId, setCurrentUser])\r\n\t//fetched currentUser\r\n\r\n\tconst [search, setSearch] = useState('')\r\n\tconst [allUsers, setAllUsers] = useState([])\r\n\tuseEffect(() => {\r\n\t\tconst fetchAllUsers = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users/allUsers\")\r\n\t\t\t\tsetAllUsers(res.data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchAllUsers()\r\n\t}, [])\r\n\r\n\tconst handleLogout = () => {\r\n\t\tsocket?.emit(\"removeUser\", currentUserId);\r\n\t\tdispatch(logout(currentUserId));\r\n\t}\r\n\r\n\r\n\tconst [notification, setNotification] = useState([]);\r\n\tconst [displayNotification, setDisplayNotification] = useState(false);\r\n\tconst [messages, setMessages] = useState(0);\r\n\tuseEffect(() => {\r\n\t\tsocket?.on(\"getNotification\", body => {\r\n\t\t\tsetMessages([body, ...notification].filter(n => n.type === \"message\").length)\r\n\t\t\tsetNotification([body, ...notification])\r\n\t\t})\r\n\t}, [socket, notification])\r\n\r\n\tconst [showMenu, setShowMenu] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"topbar\">\r\n\t\t\t<div className=\"topbar-left\">\r\n\t\t\t\t<Link className='text-link' to=\"/\"><span className=\"topbar-logo\"><i className=\"fas fa-chess-pawn\"></i> Socialify</span></Link>\r\n\t\t\t</div>\r\n\t\t\t<span className=\"closebar navbar-menu\">\r\n\t\t\t\t{showMenu ? <i className=\"fas fa-window-close\" style={{ fontSize: \"25px\" }} onClick={() => setShowMenu(!showMenu)}></i> : <i className=\"fas fa-bars\" onClick={() => setShowMenu(!showMenu)} style={{ fontSize: \"25px\" }}> </i>}\r\n\t\t\t</span>\r\n\r\n\t\t\t<div className=\"topbar-center\">\r\n\t\t\t\t<div className=\"search\">\r\n\t\t\t\t\t<Search className=\"search-icon\" />\r\n\t\t\t\t\t<input type=\"text\" name=\"\" id=\"\" placeholder=\"Search for Person or friend\" onChange={(e) => setSearch(e.target.value)} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"search-result\">\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tallUsers.filter((user) => search !== \"\" && user?.name?.toLowerCase().includes(search.toLowerCase())).slice(0, 5).map((user) => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Link key={user._id} className=\"search-result-item\" to={`/profile/${user.username}`}>\r\n\t\t\t\t\t\t\t\t\t<div >{user.name}</div>\r\n\t\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className={showMenu? \"topbar-right topbar-right-show\" : \"topbar-right topbar-right-hide\"}>\r\n\t\t\t\t<div className=\"topbar-link-container\">\r\n\t\t\t\t\t<Link className='text-link' to={`/profile/${currentUser?.username}`}><span className=\"topbar-link\"><i className=\"fas fa-home\"></i> <span className='navbar-menu-link-text'>Home</span></span></Link>\r\n\t\t\t\t\t<Link className='text-link' to=\"/\"><span className=\"topbar-link\"><i className=\"fas fa-stream\"></i>  <span className='navbar-menu-link-text'>Timeline</span></span></Link>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"topbar-icon-container\">\r\n\t\t\t\t\t{/* <div className=\"topbar-icon-item\">\r\n\t\t\t\t\t\t<Person className=\"topbar-icon\" />\r\n\t\t\t\t\t\t<span className=\"topbar-icon-badge\">1</span>\r\n\t\t\t\t\t</div> */}\r\n\t\t\t\t\t<div className=\"topbar-icon-item\">\r\n\t\t\t\t\t\t<Notifications className=\"topbar-icon\" onClick={() => setDisplayNotification(!displayNotification)} />\r\n\t\t\t\t\t\t<span className=\"topbar-icon-badge\" >{notification.length}</span>\r\n\t\t\t\t\t\t<ul className='notificationList' style={displayNotification ? { display: \"block\" } : { display: \"none\" }}>\r\n\t\t\t\t\t\t\t{notification && notification.map((n) =>\r\n\t\t\t\t\t\t\t\t<NotificationListItem n={n} key={n} />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t{notification.length !== 0 ? <button className='notificationButton' onClick={() => setNotification([])}>Mark Read</button> : \"No new notification\"}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"topbar-icon-item\">\r\n\t\t\t\t\t\t<Link className='text-link' to=\"/chat\">\r\n\t\t\t\t\t\t\t<Chat className=\"topbar-icon\" />\r\n\t\t\t\t\t\t\t<span className=\"topbar-icon-badge\">{messages}</span>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<span className=\"topbar-link topbar-icon-item\" onClick={handleLogout}><i className=\"fas fa-sign-out-alt topbar-icon\"></i></span>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<Link className='text-link navbar-profilePicture' to={`/profile/${currentUser?.username}`} ><img src={currentUser?.profilePicture ? currentUser?.profilePicture : PF + \"/person/noAvatar.png\"} alt=\"img\" /></Link>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Topbar","import { LOGOUT_FAIL, LOGOUT_START, LOGOUT_SUCCESS } from \"./userType\";\r\nimport {userRequest} from \"../../requestMethod\"\r\n\r\nexport const logoutStart=()=>({\r\n\ttype:LOGOUT_START\r\n})\r\nexport const logoutSuccess=()=>({\r\n\ttype:LOGOUT_SUCCESS\r\n})\r\n\r\nexport const logoutFail=()=>({\r\n\ttype:LOGOUT_FAIL\t\r\n})\r\n\r\nexport const logout=(userId )=>{\r\n\treturn async(dispatch)=>{\r\n\t\tawait dispatch(logoutStart());\r\n\t\ttry {\r\n\t\t\tconst refreshToken = localStorage.getItem(\"refreshToken\")\r\n\t\t\tawait userRequest.post(`/auth/logout/${userId}`,{refreshToken : refreshToken});\r\n\t\t\tlocalStorage.removeItem(\"accessToken\")\r\n\t\t\tlocalStorage.removeItem(\"refreshToken\")\r\n\t\t\tdispatch(logoutSuccess());\r\n\t\t\t// dispatch(clearRedux())\r\n\t\t\t\r\n\t\t} catch (error) {\r\n\t\t\tdispatch(logoutFail());\r\n\t\t}\r\n\t}\r\n}\r\n\r\n","import { Refresh } from '@material-ui/icons'\r\nimport React, { useEffect, useRef, useState } from 'react'\r\nimport Conversation from \"../../component/Conversation/Conversation\"\r\nimport Message from \"../../component/Message/Message\"\r\nimport Online from \"../../component/Online/Online\"\r\nimport Topbar from \"../../component/Topbar/Topbar\"\r\nimport \"./chat.css\" \r\nimport {useSelector} from \"react-redux\"\r\nimport {userRequest} from \"../../requestMethod\"\r\nimport { updateFollowing } from '../../redux/exportAllAction'\r\nimport { useDispatch } from 'react-redux'\r\n\r\nfunction Chat() {  \r\n\t//fetching currentuser\r\n\tconst socket=useSelector(state=>state.socket.socket);\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst [currentUser, setCurrentUser]= useState(null);\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser=async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\"+currentUserId); \r\n\t\t\t\tsetCurrentUser(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t},[currentUserId,setCurrentUser])\r\n\t//fetched currentUser\r\n\t\r\n\tconst [conversations, setConversations] = useState([])\r\n\tconst [currConversation, setCurrConversation] = useState(null)\r\n\tconst [messages, setMessages] = useState([])\r\n\tconst [newMessage, setNewMessage] = useState()\r\n\tconst scrollRef = useRef(); \r\n\tconst [onlineFriend, setOnlineFriend] = useState([]);\r\n\tconst [dynamicMessage, setDynamicMessage] = useState();\r\n\tconst [chatSearch, setChatSearch] = useState('')\r\n\tconst dispatch = useDispatch();\r\n\tconst followings = useSelector(state => state.following.usersId)\r\n\t//fetch followings\r\n\tuseEffect(() => {\r\n\t\tconst fetchFollowings = async () => {\r\n\t\t\tconst res = await userRequest.get(\"/users/followings/\" + currentUserId)\r\n\t\t\tdispatch(updateFollowing(res.data))\r\n\t\t}\r\n\t\tfetchFollowings()\r\n\t}, [currentUserId,dispatch]);\r\n\r\n\t//create the conversation\r\n\tasync function handleClick(userId) {\r\n\t\ttry {\r\n\t\t\tconst res = await userRequest.post(\"/conversations/\"+currentUserId, { senderId: currentUserId, receiverId: userId })\r\n\t\t\tsetCurrConversation(res.data[0])\r\n\r\n\t\t\t!conversations.some((conversation)=> conversation._id===res.data[0]._id) && setConversations([...conversations,res.data[0]])\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\t// listen to socket event\r\n\tuseEffect(() => { \r\n\t\tsocket?.on(\"getMessage\", (body) => {\r\n\t\t\tsetDynamicMessage(body)\r\n\t\t})\r\n\t}, [socket]);\r\n\r\n\t//updating the message after receiving\r\n\tuseEffect(() => {\r\n\t\tdynamicMessage && currConversation?.members.includes(dynamicMessage.senderId) && setMessages((prev) => [...prev, dynamicMessage]);\r\n\t}, [dynamicMessage, currConversation]);\r\n\t\r\n\t//whenever new user connect add that user to socket server\r\n\tuseEffect(() => { \r\n\t\tcurrentUserId && socket?.emit(\"addUser\",currentUserId);\r\n\t\tsocket?.on(\"getUsers\", (users) => { \r\n\t\t\tsetOnlineFriend(currentUser?.followings.filter((f) => users.some((u) => u.userId === f))) \r\n\t\t})\r\n\t}, [currentUserId,currentUser,socket]);\r\n\t\r\n\t// fetch conversation\r\n\tuseEffect(() => {\r\n\t\tconst fetchConversations = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/conversations/\" + currentUserId)\r\n\t\t\t\tsetConversations(res.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error.message)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchConversations()\r\n\t}, [currentUserId]);\r\n\r\n\r\n\t//fetch message\r\n\tuseEffect(() => {\r\n\t\tconst fetchMessages = async () => {\r\n\t\t\ttry{\r\n\t\t\t\tif(currConversation) {\r\n\t\t\t\t\tconst res = await userRequest.get(\"/messages/\" + currConversation._id+\"/\"+currentUserId);\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tsetMessages(res.data)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchMessages()\r\n\t}, [currConversation, currentUserId])\r\n\r\n\t// send message\r\n\tconst handleSend = async (e) => {\r\n\t\te.preventDefault()\r\n\t\tconst body = {\r\n\t\t\tconversationId: currConversation,\r\n\t\t\tsenderId: currentUserId,\r\n\t\t\ttextMessage: newMessage\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tconst res = await userRequest.post(\"/messages/\"+currentUserId, body);\r\n\t\t\tsetMessages([...messages, res.data]);\r\n\t\t\tsocket?.emit(\"sendMessage\", {\r\n\t\t\t\tbody: body,\r\n\t\t\t\treceiverId: currConversation?.members.find((member) => member != currentUserId),\r\n\t\t\t})\r\n\t\t\tsocket?.emit(\"sendNotification\",{\r\n\t\t\t\treceiverId: currConversation?.members.find((member) => member != currentUserId),\r\n\t\t\t\tsenderId: currentUserId,\r\n\t\t\t\ttext:\"send you a message\",\r\n\t\t\t\ttype:\"message\"\r\n\t\t\t})\r\n\t\t\tsetNewMessage(\"\")\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\t// fetching alluser for search \r\n\tconst [allUsers, setAllUsers] = useState([])\r\n\tuseEffect(() => {\r\n\t\tconst fetchAllUsers = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users/allUsers\")\r\n\t\t\t\tsetAllUsers(res.data); \r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchAllUsers()\r\n\t}, [ ])\r\n\r\n\t//scroll automatically on new messages \r\n\tuseEffect(() => {\r\n\t\tscrollRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n\t}, [messages]);\r\n\r\n\tconst [showChatRightbar , setShowChatRightbar] = useState(true)\r\n\tconst [showChatSidebar , setShowChatSidebar] = useState(true)\r\n\tuseEffect(()=>{\r\n\t\tif(window.innerWidth <= 600){\r\n\t\t\tsetShowChatSidebar(false);\r\n\t\t\tsetShowChatRightbar(false);\r\n\t\t}\r\n\t},[])\r\n\r\n\treturn (\r\n\r\n\t\t<>\r\n\t\t\t<Topbar />\r\n\t\t\t<div className=\"messenger\">\r\n\t\t\t\t<div className=\"messenger-wrapper\">\r\n\t\t\t\t{showChatSidebar ? <i className=\"fas fa-caret-square-right caret-right caret-chat-sidebar\" style={{ fontSize: \"25px\" }} onClick={() => setShowChatSidebar(!showChatSidebar)}></i>:<i className=\"fas fa-caret-square-left caret-left caret-chat-sidebar\" style={{ fontSize: \"25px\" }} onClick={() => setShowChatSidebar(!showChatSidebar)}></i>}\r\n\t\t\t\t\t<div className={showChatSidebar ? \"chat-left showChatSidebar\" : \"chat-left hideChatSidebar\"}>\r\n\t\t\t\t\t\t<div className=\"chat-left-wrapper\">\r\n\t\t\t\t\t\t\t<i className=\"fas fa-search\"> Search user here!!</i>\r\n\t\t\t\t\t\t\t<input type=\"text\" className=\"search-friend\" placeholder=\"Search friend for Chat\" onChange={(e) => { setChatSearch(e.target.value) }} />\r\n\r\n\t\t\t\t\t\t\t{allUsers.filter((user) =>  followings.includes(user._id) && chatSearch !== \"\" && user.name && user.name.toLowerCase().includes(chatSearch.toLowerCase())).slice(0,5).map((user) => {\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div key={user?._id} onClick={() => handleClick(user._id)} className=\"search-result-item\" >{user.name} </div>\r\n\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t{conversations?.map((conversation) => (\r\n\t\t\t\t\t\t\t\t<div key={conversation?._id} onClick={() => setCurrConversation(conversation) } >\r\n\t\t\t\t\t\t\t\t\t<div className={currConversation?._id===conversation?._id ? \"selected\" : ''}>\r\n\t\t\t\t\t\t\t\t\t\t<Conversation key={conversation?._id} conversation={conversation} />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"chat-center\">\r\n\r\n\t\t\t\t\t\t{currConversation ?\r\n\t\t\t\t\t\t\t<div className=\"chat-center-wrapper\">\r\n\t\t\t\t\t\t\t\t<div className=\"chat-center-top\">\r\n\t\t\t\t\t\t\t\t\t{messages?.map((message) => (\r\n\t\t\t\t\t\t\t\t\t\t<div ref={scrollRef}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Message key={message._id} message={message} own={message.senderId === currentUserId ? true : false} />\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"chat-center-bottom\">\r\n\t\t\t\t\t\t\t\t\t<form className=\"box\" onSubmit={handleSend}>\r\n\t\t\t\t\t\t\t\t\t\t<textarea onChange={(e) => setNewMessage(e.target.value)} name=\"\" id=\"message\" cols=\"30\" rows=\"3\" placeholder=\"Write something here ....\" value={newMessage} />\r\n\t\t\t\t\t\t\t\t\t\t<Refresh className=\"sending-process\" />\r\n\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" className=\"send-btn\"><i className=\"fas fa-paper-plane\"></i>Send</button>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t<div className=\"no-chat-selected\">Search friend and Select Conversation To Start the Chat</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{showChatRightbar ? <i className=\"fas fa-caret-square-right caret-right caret-chat-rightbar\" style={{ fontSize: \"25px\" }} onClick={() => setShowChatRightbar(!showChatRightbar)}></i>:<i className=\"fas fa-caret-square-left caret-left caret-chat-rightbar\" style={{ fontSize: \"25px\" }} onClick={() => setShowChatRightbar(!showChatRightbar)}></i>}\r\n\t\t\t\t\t<div className={showChatRightbar ? \"chat-right showChatRightbar\" : \"chat-right hideChatRightbar\"}>\r\n\t\t\t\t\t\t<div className=\"chat-right-wrapper\">\r\n\t\t\t\t\t\t\t<h2 className=\"heading\"><i className=\"fas fa-globe-americas\"></i> Online Friend</h2>\r\n\t\t\t\t\t\t\t<ul className=\"online-friend-list\">\r\n\t\t\t\t\t\t\t\t{onlineFriend?.length===0? \"No friend Online\" : ''}\r\n\t\t\t\t\t\t\t\t{onlineFriend?.map((userId) => (\r\n\t\t\t\t\t\t\t\t\t<Online key={userId} userId={userId} setCurrConversation={setCurrConversation} />\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Chat\r\n\r\n\r\n\r\n","import React from 'react'\r\nimport Topbar from \"../../component/Topbar/Topbar\"\r\nimport \"./Error.css\"\r\n \r\n\r\nfunction Error({statusCode , message}) {\r\n\tmessage=message?message:\"Some Error Occured\";\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t<Topbar />\r\n\t\t<div className=\"error-page\">\r\n\t\t\t<div className=\"error-message\">{statusCode} {message}</div>\r\n\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Error\r\n","import React, { useState } from 'react'\r\nimport { useEffect } from 'react';\r\nimport { Link } from \"react-router-dom\"\r\nimport { userRequest } from '../../requestMethod';\r\nimport \"./CloseFriend.css\"\r\n\r\n\r\nfunction CloseFriend({ userId , className}) {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst [user, setUser] = useState();\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + userId)\r\n\t\t\t\tsetUser(res.data)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [userId])\r\n\r\n\r\n\treturn (\r\n\t\t<Link to={`/profile/${user?.username}`} className=\"text-link\">\r\n\t\t\t<div className={className} >\r\n\t\t\t\t<img src={user?.profilePicture ? user?.profilePicture : PF + \"person/noAvatar.png\"} alt=\"img\" />\r\n\t\t\t\t<div className=\"name\">{user?.name}</div>\r\n\t\t\t</div>\r\n\t\t</Link>\r\n\t)\r\n}\r\n\r\nexport default CloseFriend","import React, { useEffect, useState } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport \"./Sidebar.css\"\r\nimport { RssFeed, Chat, PersonAdd } from \"@material-ui/icons\";\r\nimport CloseFriend from \"../CloseFriend/CloseFriend\"\r\nimport { useSelector } from \"react-redux\"\r\nimport { userRequest } from '../../requestMethod';\r\nimport { useDispatch } from 'react-redux';\r\nimport { updateFollowing } from '../../redux/exportAllAction';\r\n\r\nfunction Sidebar() {\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\t//fetched currentUser\r\n\tconst dispatch = useDispatch();\r\n\tconst followings = useSelector(state => state.following.usersId)\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\tuseEffect(() => {\r\n\t\tconst fetchFollowing = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users/followings/\" + currentUserId)\r\n\t\t\t\tdispatch(updateFollowing(res.data))\r\n\t\t\t\tsetLoaded(true)\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchFollowing()\r\n\t}, [currentUserId, dispatch]);\r\n\tconst [showSidebar, setShowSidebar] = useState(true);\r\n\tuseEffect(()=>{\r\n\t\tif(window.innerWidth <= 600){\r\n\t\t\tsetShowSidebar(false);\r\n\t\t}\r\n\t},[])\r\n\r\n\treturn loaded && (\r\n\r\n\t\t<>\r\n\t\t\t{showSidebar ? <i className=\"fas fa-caret-square-left caret-left caret-sidebar\" style={{ fontSize: \"25px\" }} onClick={() => setShowSidebar(!showSidebar)}></i>:<i className=\"fas fa-caret-square-right caret-right caret-sidebar\" style={{ fontSize: \"25px\" }} onClick={() => setShowSidebar(!showSidebar)}></i>} \t\r\n\t\t\t<div className={showSidebar ? \"sidebar showSidebar\" : \"sidebar hideSidebar\"} >\r\n\t\t\t\t<div className=\"sidebar-wrapper\">\r\n\t\t\t\t\t<ul className=\"menu-list\">\r\n\t\t\t\t\t\t<li className=\"menu-list-item\">\r\n\t\t\t\t\t\t\t<Link className='text-link' to=\"/\">\r\n\t\t\t\t\t\t\t\t<RssFeed className=\"menu-list-icon\" />\r\n\t\t\t\t\t\t\t\t<span className=\"menu-list-text\">Feed</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"menu-list-item\">\r\n\t\t\t\t\t\t\t<Link className='text-link' to=\"/chat\">\r\n\t\t\t\t\t\t\t\t<Chat className=\"menu-list-icon\" />\r\n\t\t\t\t\t\t\t\t<span className=\"menu-list-text\">Chats</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t<li className=\"menu-list-item\">\r\n\t\t\t\t\t\t\t<Link className='text-link' to=\"/friendPage?type=all\" >\r\n\t\t\t\t\t\t\t\t<PersonAdd className=\"menu-list-icon\" />\r\n\t\t\t\t\t\t\t\t<span className=\"menu-list-text\">Find Friend</span>\r\n\t\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\r\n\t\t\t\t\t{/* <button className=\"sidebar-btn\">Show More</button> */}\r\n\t\t\t\t\t<hr />\r\n\r\n\t\t\t\t\t<div className=\"friend-list\">\r\n\t\t\t\t\t\t<h2 className=\"heading\"><span className=\"follower-following-counter\"><i className=\"fas fa-users\" style={{ fontSize: \"25px\" }}></i> My Followings  ({followings.length})</span></h2>\r\n\t\t\t\t\t\t{followings.length !== 0 ?\r\n\t\t\t\t\t\t\tfollowings.slice(0, 5).map((followingId) => <CloseFriend key={followingId} userId={followingId} className=\"friend-list-item\" />)\r\n\t\t\t\t\t\t\t: 'Currently no followings'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<Link className='text-link' to={{ pathname: `/friendPage`, search: `type=Myfollowings`, state: { usersId: followings } }} >\r\n\t\t\t\t\t\t\t<button className=\"show-all\" >Show All</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Sidebar\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/storage\";\r\nconst firebaseConfig = {\r\n\tapiKey: \"AIzaSyDG4UwInJWCmztkK2nAIhqrLPJB5-H_FU4\",\r\n\tauthDomain: \"socialify-8b5dd.firebaseapp.com\",\r\n\tprojectId: \"socialify-8b5dd\",\r\n\t// databaseURL: \"fir-react-upload-5daa4.firebaseio.com\",\r\n\tstorageBucket: \"socialify-8b5dd.appspot.com\",\r\n\tmessagingSenderId: \"106617260750\",\r\n\tappId: \"1:106617260750:web:e0806af0c47ae445d59e9f\",\r\n\tmeasurementId: \"G-PTGDWZE2HZ\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst storage = firebase.storage();\r\nexport { storage, firebase as default };","import React, { useEffect, useRef, useState } from 'react'\r\nimport { PermMedia, Label, Room, EmojiEmotions, Cancel } from \"@material-ui/icons\"\r\nimport \"./Share.css\"\r\nimport { storage } from \"../../firebase/firebase\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\"\r\nimport { userRequest } from '../../requestMethod';\r\n\r\n\r\nfunction Share({ posts, setPosts }) {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst [currentUser, setCurrentUser] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + currentUserId);\r\n\t\t\t\tsetCurrentUser(res.data);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [currentUserId, setCurrentUser])\r\n\t//fetched currentUser\r\n\r\n\r\n\tconst history = useHistory();\r\n\tconst [desc, setDesc] = useState(\"\");\r\n\tconst [file, setFile] = useState()\r\n\tconst [progress, setProgress] = useState(0)\r\n\r\n\tconst [preview, setPreview] = useState(null)\r\n\tconst [makePost, setMakePost] = useState(false)\r\n\r\n\r\n\tconst handleFilechange = (e) => {\r\n\t\tif (e.target.files[0]) {\r\n\t\t\tsetFile(e.target.files[0])\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.onloadend = () => {\r\n\t\t\t\tsetPreview(reader.result);\r\n\t\t\t};\r\n\t\t\treader.readAsDataURL(e.target.files[0]);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsetFile(null)\r\n\t\t}\r\n\t}\r\n\r\n\tconst handleSubmit = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tconst newPost = {\r\n\t\t\t\"userId\": currentUserId,\r\n\t\t\t\"desc\": desc,\r\n\t\t}\r\n\t\tif (file) {\r\n\t\t\ttry {\r\n\t\t\t\tconst fileName = Date.now() + file.name\r\n\t\t\t\tconst uploadTask = storage.ref(`${currentUser?.username}/posts/${fileName}`).put(file);\r\n\t\t\t\tuploadTask.on(\"state_changed\",\r\n\t\t\t\t\tsnapshot => {\r\n\t\t\t\t\t\tconst progress = Math.round((snapshot.bytesTransferred / snapshot.totalBytes) * 100);\r\n\t\t\t\t\t\tsetProgress(progress);\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror => { console.log(error); },\r\n\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\tawait storage.ref(`${currentUser?.username}/posts/`).child(fileName).getDownloadURL().then((imgurl) => { newPost.img = imgurl })\r\n\t\t\t\t\t\tconst res = await userRequest.post(\"/posts/\" + currentUserId, newPost);\r\n\t\t\t\t\t\tsetPosts([res.data, ...posts])\r\n\t\t\t\t\t\tsetDesc(\"\")\r\n\t\t\t\t\t\tsetPreview(null);\r\n\t\t\t\t\t\tsetProgress(0);\r\n\t\t\t\t\t\tsetFile(null);\r\n\t\t\t\t\t\tsetMakePost(true);\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tsetMakePost(false);\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\tcatch (error) {\r\n\t\t\t\tconsole.log(error.message) \r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.post(\"/posts/\" + currentUserId, newPost);\r\n\t\t\t\tsetPosts([res.data, ...posts])\r\n\t\t\t\tsetPreview(null);\r\n\t\t\t\tsetProgress(0);\r\n\t\t\t\tsetFile(null);\r\n\t\t\t\tsetMakePost(true);\r\n\t\t\t\tsetDesc(\"\")\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tsetMakePost(false);\r\n\t\t\t\t}, 1000);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error.message) \r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tconst handleRemoveImg = () => {\r\n\t\tsetFile(null);\r\n\t\tsetPreview(null);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"share\">\r\n\t\t\t<div className=\"share-wrapper\">\r\n\t\t\t\t<div className=\"share-top\">\r\n\t\t\t\t\t<img src={currentUser?.profilePicture ? currentUser?.profilePicture : PF + \"person/noAvatar.png\"} alt=\"profileimg\" />\r\n\t\t\t\t\t<input type=\"text\" value={desc} onChange={(e) => setDesc(e.target.value)} placeholder={\"What in Your Mind Today \" + currentUser?.username + \" ??\"} />\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t{preview ?\r\n\t\t\t\t\t<div className=\"img-upload\">\r\n\t\t\t\t\t\t<img src={preview} className=\"uploaded-img\" alt=\"No images Selected\" />\r\n\t\t\t\t\t\t<div className=\"remove-uploaded-img\" onClick={handleRemoveImg}><Cancel /></div>\r\n\t\t\t\t\t\t<progress className=\"upload-progress\" value={progress} />\r\n\t\t\t\t\t\t{progress === 100 ? <div className=\"upload-complete\"> Image Upload completed</div> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t''\r\n\t\t\t\t}\r\n\t\t\t\t{makePost ? <div className=\"post-complete\"> Post Successfully </div> : ''}\r\n\t\t\t\t<div className=\"share-bottom\">\r\n\r\n\t\t\t\t\t<form onSubmit={handleSubmit} className=\"option-container\">\r\n\t\t\t\t\t\t<label htmlFor=\"file\" className=\"option\">\r\n\t\t\t\t\t\t\t<PermMedia htmlColor=\"red\" className=\"icon\" />\r\n\t\t\t\t\t\t\t<span className=\"option-text\">Photo & Video</span>\r\n\t\t\t\t\t\t\t<input type=\"file\" name=\"file\" accept=\"image/*\" id=\"file\" style={{ display: \"none\" }} onChange={handleFilechange} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label htmlFor=\"label\" className=\"option\">\r\n\t\t\t\t\t\t\t<Label htmlColor=\"blue\" className=\"icon\" />\r\n\t\t\t\t\t\t\t<span className=\"option-text\" style={{ textDecorationLine: 'line-through' }} >Label</span>\r\n\t\t\t\t\t\t\t<input type=\"label\" name=\"label\" id=\"label\" style={{ display: \"none\" }} onChange={(e) => { }} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label htmlFor=\"location\" className=\"option\">\r\n\t\t\t\t\t\t\t<Room htmlColor=\"green\" className=\"icon\" />\r\n\t\t\t\t\t\t\t<span className=\"option-text\" style={{ textDecorationLine: 'line-through' }} >Location</span>\r\n\t\t\t\t\t\t\t<input type=\"location\" name=\"location\" id=\"location\" style={{ display: \"none\" }} onChange={(e) => { }} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<label htmlFor=\"feeling\" className=\"option\">\r\n\t\t\t\t\t\t\t<EmojiEmotions htmlColor=\"yellow\" className=\"icon\" />\r\n\t\t\t\t\t\t\t<span className=\"option-text\" style={{ textDecorationLine: 'line-through' }}>Feeling</span>\r\n\t\t\t\t\t\t\t<input type=\"feeling\" name=\"feeling\" id=\"feeling\" style={{ display: \"none\" }} onChange={(e) => { }} />\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t<button type=\"submit\"> Share </button>\r\n\t\t\t\t\t</form>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Share\r\n","import React from 'react'\r\nimport { useState } from 'react';\r\nimport { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { userRequest } from '../../requestMethod'; \r\nimport \"./PostCommentItem.css\"\r\n\r\nfunction PostCommentItem({c , deleteComment}) {\r\n\tconst currentUserId = useSelector(state=>state.user.currentUserId);\r\n\tconst [user, setUser] = useState(null)\r\n\tuseEffect(() => { \r\n\t\tconst fetchUser = async () => {\r\n\t\t\tconst res = await userRequest.get(`/users?userId=${c.userId}`);\r\n\t\t\tsetUser(res.data);\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [c])\r\n\r\n\treturn (\r\n\t\t<div className=\"postCommentItem\"> \r\n\t\t\t<div className=\"postCommentItemImgContainer\">\r\n\t\t\t\t<img src={user?.profilePicture} alt=\"img\" className=\"postCommentItemImg\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"postCommentItemContent\">\r\n\t\t\t\t<div className=\"postContainerItemText\">\r\n\t\t\t\t\t<b>{user?.name}</b> {c.text}\r\n\t\t\t\t</div>\r\n\t\t\t\t{currentUserId === c.userId && <button onClick={()=>deleteComment(c._id)}  className=\"postCommentItemButton\"><i className=\"fas fa-trash\"></i>  delete</button>}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default PostCommentItem\r\n","import React, { useEffect } from 'react'\r\nimport { useState } from 'react'\r\nimport { userRequest } from '../../requestMethod';\r\n\r\nfunction ListModalListItem({userId}) {\r\n\tconst [user,setUser] =useState(null);\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser=async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(`/users?userId=${userId}`);\r\n\t\t\t\tsetUser(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error.message);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t},[userId])\r\n\r\n\treturn (\r\n\t\t<li className=\"likeModalListItem\">\r\n\t\t\t<div className=\"likeModalListItemImgContainer\">\r\n\t\t\t\t<img src={user?.profilePicture} alt=\"\" className='likeModalListItemImg' />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"likeModelListItemName\"> {user?.name} </div>\r\n\t\t</li>\r\n\t)\r\n}\r\n\r\nexport default ListModalListItem\r\n","import React from 'react'\r\nimport {  Modal ,Button } from 'react-bootstrap';\r\nimport \"./LikeModel.css\"\r\nimport LikeModalListItem from \"../ListModalListItem/ListModalListItem\"\r\n\r\nfunction likeModal(props) {\r\n\treturn (\r\n\t  <Modal\r\n\t\t{...props}\r\n\t\tsize=\"sm\"\r\n\t\taria-labelledby=\"contained-modal-title-vcenter\"\r\n\t\tcentered\r\n\t  >\r\n\t\t<Modal.Header closeButton>\r\n\t\t  <Modal.Title id=\"contained-modal-title-vcenter\">\r\n\t\t\tLike({props.likes.length})\r\n\t\t  </Modal.Title>\r\n\t\t</Modal.Header>\r\n\t\t<Modal.Body>\r\n\t\t  <ul className=\"likeModalList\">\r\n\t\t  \t{\r\n\t\t\t\tprops.likes.map((l)=>\r\n\t\t\t\t\t<LikeModalListItem userId={l} key={l}/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t  </ul>\r\n\t\t</Modal.Body>\r\n\t\t<Modal.Footer>\r\n\t\t  <Button onClick={props.onHide}>Close</Button>\r\n\t\t</Modal.Footer>\r\n\t  </Modal>\r\n\t);\r\n  }\r\n\r\nexport default likeModal\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Post.css\"\r\nimport { MoreVert } from \"@material-ui/icons\";\r\nimport { format } from \"timeago.js\"\r\nimport {useSelector} from \"react-redux\"\r\nimport { userRequest } from '../../requestMethod';\r\nimport PostCommentItem from \"../postCommentItem/PostCommentItem\";\r\nimport LikeModal from '../LikeModal/LikeModal';\r\n\r\nfunction Post({post , posts ,setPosts}) {\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst socket= useSelector(state => state.socket.socket)\r\n\t// fetched currentUser\r\n\t\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst [user, setUser] = useState({});\r\n\r\n\tconst [like, setLike] = useState(post.like);\r\n\tconst [isLike, setIsLike] = useState(false);\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tsetIsLike(post.like?.includes(currentUserId));\r\n\t}, [currentUserId, post.like]);\r\n\t\r\n\t\r\n\tconst handleLike = async () => {\r\n\t\ttry {\r\n\t\t\tawait userRequest.put(\"/posts/\" + post._id + \"/like\", { userId: currentUserId });\r\n\t\t\tsocket?.emit(\"sendNotification\",{\r\n\t\t\t\treceiverId: post.userId,\r\n\t\t\t\tsenderId: currentUserId,\r\n\t\t\t\ttext: isLike?\"unlike your Post\":\"like your post\",\r\n\t\t\t\ttype:isLike?\"unlike\":\"like\"\r\n\t\t\t})\r\n\t\t\tif (isLike) { setLike(prev=> prev.filter(l=> l !==currentUserId)); }\r\n\t\t\telse { setLike(prev => [currentUserId ,...prev]); }\r\n\t\t\tsetIsLike(!isLike);\r\n\t\t} catch(error) {\r\n\t\t\tconsole.log(error.message)\r\n\t\t}\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\tconst res = await userRequest.get(`/users?userId=${post.userId}`);\r\n\t\t\tsetUser(res.data);\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [post.userId])\r\n\r\n\tconst [isDeleted, setIsDeleted] = useState(false);\r\n\tconst handleDelete = async () => {\r\n\t\ttry {\r\n\t\t\tawait userRequest.delete(\"/posts/\" + post._id+\"/\"+currentUserId);\r\n\t\t\tsetIsDeleted(true);\r\n\t\t\tsetPosts(posts.filter(p=> p._id!== post._id)) \r\n\t\t} catch (error) { \r\n\t\t\tconsole.log(error.message);\r\n\t\t}\r\n\t}\r\n\r\n\tconst [postComment , setPostComment] = useState([]);\r\n\tuseEffect(()=>{\r\n\t\tconst fetchComment= async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res= await userRequest.get(\"/comment/\"+post._id);\r\n\t\t\t\tsetPostComment(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchComment();\r\n\t},[post._id])\r\n\tconst [comment, setComment] = useState(\"\")\r\n\tconst [displayComment , setDisplayComment] = useState(false);\r\n\tconst handleSendComment= async(e)=>{\r\n\t\te.preventDefault()\r\n\t\ttry {\r\n\t\t\tconst c={\r\n\t\t\t\tpostId : post._id,\r\n\t\t\t\tuserId:currentUserId,\r\n\t\t\t\ttext: comment\r\n\t\t\t}\r\n\t\t\tconst res = await userRequest.post(\"/comment/\"+post._id , c)\r\n\t\t\tsetPostComment(prev=>[...prev , res.data])\r\n\t\t\tsetComment(\"\");\r\n\t\t\tsocket?.emit(\"sendNotification\",{\r\n\t\t\t\treceiverId: post.userId,\r\n\t\t\t\tsenderId: currentUserId,\r\n\t\t\t\ttext: \"comment on your post\",\r\n\t\t\t\ttype: \"comment\"\r\n\t\t\t})\r\n\t\t} catch(error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\tconst deleteComment=async(cid)=>{\r\n\t\ttry { \r\n\t\t\tawait userRequest.delete(`/comment/${cid}/${currentUserId}`)\r\n\t\t\tsetPostComment(postComment.filter(c=> c._id!=cid))\r\n\t\t} catch(error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\tconst [modalShow, setModalShow] = useState(false);\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"post\">\r\n\t\t\t<div className=\"post-wrapper\">\r\n\r\n\t\t\t\t<div className=\"post-top\">\r\n\t\t\t\t\t<div className=\"post-top-left\">\r\n\t\t\t\t\t\t<img className=\"profile-img\" src={user.profilePicture ?  user.profilePicture : PF + \"person/noAvatar.png\"} alt=\"img\" />\r\n\t\t\t\t\t\t<Link className='text-link' to={`/profile/${user.username}`}>\r\n\t\t\t\t\t\t\t<div className=\"name\">{user.name}</div>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t\t<div className=\"time\">{format(post.createdAt)}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"post-top-right\">\r\n\t\t\t\t\t\t<MoreVert className=\"more-icon\" />\r\n\t\t\t\t\t\t{post.userId === currentUserId ? <i className=\"fas fa-trash\" onClick={handleDelete} style={{fontSize:\"25px\"}}></i>  : ''}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t{isDeleted ? <div className=\"deleted\">Post Deleted</div> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\t\t\t\t<div className=\"post-middle\">\r\n\t\t\t\t\t<div className=\"post-text\">{post.desc}</div>\r\n\t\t\t\t\t{post.img && <img src={post.img} className=\"post-img\" alt=\"post-img\" />}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"post-bottom\">\r\n\t\t\t\t\t<div className=\"post-bottom-left\">\r\n\t\t\t\t\t\t{isLike? <i className=\"fas fa-heart\" onClick={handleLike} style={{color:\"red\" , fontSize:\"25px\"}}></i> :<i className=\"far fa-heart\" onClick={handleLike} style={{color:\"red\" , fontSize:\"25px\"}} ></i> }\r\n\t\t\t\t\t\t<span className=\"like-counter\" onClick={() => setModalShow(true)} ><b>{like.length} people like it</b></span>\r\n\t\t\t\t\t\t<LikeModal show={modalShow} onHide={() => setModalShow(false)} likes={like} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"post-bottom-right\">\r\n\t\t\t\t\t\t<span className=\"comment-counter\" onClick={()=>setDisplayComment(!displayComment)}><i className=\"fas fa-comments\"></i> <b> {postComment.length} comment </b></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"postComment\">\r\n\t\t\t\t\t{displayComment && postComment.map((c)=>\r\n\t\t\t\t\t\t<PostCommentItem c={c} deleteComment={deleteComment} />\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<form className='postCommentForm'>\r\n\t\t\t\t\t\t<input type=\"text\" value={comment} onChange={e=>setComment(e.target.value)} className=\"postCommentInput\" placeholder='write your comment here'/>\r\n\t\t\t\t\t\t<button className='postCommentButton' type=\"submit\" onClick={(e)=>handleSendComment(e)}><i className=\"fas fa-paper-plane\" style={{fontSize:\"16px\"}}>Send</i></button>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Post\r\n","import React, { useEffect, useState } from 'react'\r\nimport \"./Feed.css\"\r\nimport Share from '../Share/Share'\r\nimport Post from '../Post/Post'\r\nimport { useSelector } from 'react-redux'\r\nimport { userRequest } from '../../requestMethod'\r\n\r\nfunction Feed({ username, timeline }) {\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst [currentUser, setCurrentUser]= useState(null);\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser=async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\"+currentUserId); \r\n\t\t\t\tsetCurrentUser(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t},[currentUserId,setCurrentUser])\r\n\t// fetched currentUser\r\n\t\r\n\tconst [posts, setPosts] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst ac = new AbortController(); // to solve some non compulsory error\r\n\t\tconst fetchPosts = async () => {\r\n\t\t\tconst res = username ? await userRequest.get(\"/posts/profile/\" + username) : await userRequest.get(\"/posts/timeline/\" + currentUserId)\r\n\t\t\tsetPosts(res.data.sort((p1, p2) => {\r\n\t\t\t\treturn new Date(p2.createdAt) - new Date(p1.createdAt);\r\n\t\t\t}));\r\n\t\t}\r\n\t\tfetchPosts();\r\n\t\treturn () => ac.abort(); // Abort both fetches on unmount\r\n\t}, [username, currentUserId]);\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"feed\">\r\n\t\t\t<div className=\"feed-wrapper\">\r\n\t\t\t\t{username === currentUser?.username || timeline ? <Share setPosts={setPosts} posts={posts}/> : ''}\r\n\t\t\t\t{posts.length!==0 ? posts.map((post) => <Post key={post._id} post={post} posts={posts} setPosts={setPosts} />) : \"No Post Currently.\"}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Feed\r\n","import React, { useState, useEffect } from 'react'\r\nimport \"./Rightbar.css\"\r\nimport Online from \"../Online/Online\"\r\nimport { useSelector } from \"react-redux\"\r\n\r\nfunction Rightbar() {\r\n\t//fetching reduxState\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst followings = useSelector(state => state.following.usersId)\r\n\tconst socket = useSelector(state => state.socket.socket)\r\n\t//fetched reduxState\r\n\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst [onlineFriend, setOnlineFriend] = useState([]);\r\n\r\n\t//connecting to socket server \r\n\tuseEffect(() => {\r\n\t\tconsole.log()\r\n\t\tcurrentUserId && socket?.emit(\"addUser\", currentUserId);\r\n\t\tsocket?.on(\"getUsers\", users => {\r\n\t\t\tsetOnlineFriend(followings?.filter((fid) => users.some((u) => u.userId === fid)))\r\n\t\t})\r\n\t}, [currentUserId, followings, socket]);\r\n\tconst [showRightbar, setShowRightbar] = useState(true);\r\n\tuseEffect(()=>{\r\n\t\tif(window.innerWidth <= 600){\r\n\t\t\tsetShowRightbar(false);\r\n\t\t}\r\n\t},[])\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{showRightbar ? <i className=\"fas fa-caret-square-right caret-right caret-rightbar\" style={{ fontSize: \"25px\" }} onClick={() => setShowRightbar(!showRightbar)}></i>:<i className=\"fas fa-caret-square-left caret-left caret-rightbar\" style={{ fontSize: \"25px\" }} onClick={() => setShowRightbar(!showRightbar)}></i>}\r\n\t\t\t<div className={showRightbar ? \"rightbar showRightbar\" : \"rightbar hideRightbar\"}>\r\n\t\t\t\t<div className=\"rightbar-wrapper\">\r\n\t\t\t\t\t<div className=\"rightbar-top\">\r\n\t\t\t\t\t\t{/* <img src={PF+\"gift.png\"} alt=\"birthdayImg\" className=\"birthday-img\" /> */}\r\n\t\t\t\t\t\t{/* <span className=\"birthday-text\"><b>Rachel</b> and <b>3 other</b> friend has birthday today.</span> */}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"rightbar-center\">\r\n\t\t\t\t\t\t<div className=\"rightbarCenterImgContainer\">\r\n\t\t\t\t\t\t\t<img className=\"rightbar-ad\" src={PF + \"ad.jpg\"} alt=\"ad\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<hr />\r\n\t\t\t\t\t<div className=\"rightbar-bottom\">\r\n\t\t\t\t\t\t<span className=\"heading\"><i className=\"fas fa-globe-americas\"></i> Online Friend</span>\r\n\r\n\t\t\t\t\t\t<ul className=\"online-friend-list\">\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tonlineFriend.length === 0 ? \"No Friend Online Currently \"\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\tonlineFriend?.map((userId) => <Online key={userId} userId={userId} />)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Rightbar\r\n","import React from 'react'\r\nimport Topbar from '../../component/Topbar/Topbar';\r\nimport Sidebar from '../../component/Sidebar/Sidebar';\r\nimport Feed from '../../component/Feed/Feed';\r\nimport Rightbar from '../../component/Rightbar/Rightbar';\r\nimport \"./Home.css\"\r\n\r\nfunction Home() {\r\n\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Topbar />\r\n\t\t\t<div className=\"hero-container\">\r\n\t\t\t\t<Sidebar />\r\n\t\t\t\t<Feed timeline={true} />\r\n\t\t\t\t<Rightbar />\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\nexport default Home","import React, { useRef } from 'react'\r\nimport \"./Login.css\" \r\nimport { CircularProgress } from \"@material-ui/core\";\r\nimport {useHistory} from 'react-router';\r\nimport {Link} from \"react-router-dom\";\r\nimport {useSelector ,useDispatch} from \"react-redux\" \r\nimport {login} from \"../../redux/exportAllAction\" \r\n\r\nfunction Login() {\r\n\tconst email= useRef();\r\n\tconst password= useRef();\r\n\r\n\tconst dispatch =useDispatch();\r\n\tconst userState = useSelector(state=>state.user)\r\n\tconst { isLoading, error} = userState;\r\n\tconst history=useHistory();\r\n\tconst handleSubmit= (e)=>{\r\n\t\t\te.preventDefault();\r\n\t\t\tdispatch(login(  email.current.value, password.current.value ))\r\n\t\t\thistory.push(\"/\");\r\n\t\t\tconsole.log(error, isLoading)\r\n\t}\r\n\t \r\n\treturn (\r\n\t\t<div className=\"login\">\r\n\t\t\t<div className=\"login-wrapper\">\r\n\r\n\t\t\t\t<div className=\"login-left\">\r\n\t\t\t\t\t<div className=\"logo\">Socialify</div>\r\n\t\t\t\t\t<div className=\"desc\">Connect to friend and the world around you on Socialify</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className=\"login-right\">\r\n\t\t\t\t\t<form onSubmit={handleSubmit} className=\"login-form\">\r\n\t\t\t\t\t\t<input  type=\"text\" placeholder=\"Email\" ref={email} />\r\n\t\t\t\t\t\t<input  type=\"password\" placeholder=\"Password\" ref={password} />\r\n\t\t\t\t\t\t<button className=\"login-btn\" type=\"submit\" disabled={isLoading}>  \r\n\t\t\t\t\t\t{isLoading ? ( <CircularProgress size=\"20px\" /> ) : ( \"Log In\" )}\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t{/* <span className=\"forget-password\">Forget Password</span> */}\r\n\t\t\t\t\t\t<Link className='text-link' to=\"/register\">\r\n\t\t\t\t\t\t\t<button className=\"register-btn\" type=\"submit\" disabled={isLoading}>\r\n\t\t\t\t\t\t\t{isLoading ? ( <CircularProgress size=\"20px\" /> ) : ( \"Sign Up\" )}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Login\r\n","import { LOGIN_FAIL, LOGIN_START, LOGIN_SUCCESS } from \"./userType\"; \r\nimport { publicRequest } from '../../requestMethod';\r\n\r\nexport const loginStart=()=>({\r\n\ttype:LOGIN_START\r\n})\r\nexport const loginSuccess=(userId)=>({\r\n\ttype:LOGIN_SUCCESS,\r\n\tpayload: userId\r\n})\r\n\r\nexport const loginFail=()=>({\r\n\ttype:LOGIN_FAIL\r\n\t\r\n})\r\n\r\nexport const login=(email, password)=>{\r\n\treturn async(dispatch)=>{\r\n\t\tawait dispatch(loginStart());\r\n\t\ttry {\r\n\t\t\tconst res= await publicRequest.post(\"/auth/login\",{ email: email , password: password});\r\n\t\t\tconst user =res.data;  \r\n\t\t\tlocalStorage.setItem(\"accessToken\",user.accessToken);\r\n\t\t\tlocalStorage.setItem(\"refreshToken\",user.refreshToken);\r\n\t\t\tdispatch(loginSuccess(user._id));\r\n\t\t} catch (error) {\r\n\t\t\tdispatch(loginFail())\r\n\t\t}\r\n\t}\r\n}\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from 'react-redux';\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\nimport { storage } from \"../../firebase/firebase\";\r\nimport { userRequest } from '../../requestMethod';\r\nimport \"./UpdateProfileBtn.css\"\r\n\r\n\r\nfunction UpdateProfileBtn({userId}) {\r\n\t//fetching reduxState\r\n\tconst currentUserId = useSelector(state => state.user.currentUserId)\r\n\t//fetched reduxState\r\n\tconst params = useParams()\r\n\tconst history = useHistory()\r\n\tconst [profilePic, setProfilePic] = useState(null);\r\n\tconst [coverPic, setCoverPic] = useState(null);\r\n\tconst username = params.username;\r\n\tconst [user, setUser] = useState({});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(`/users?username=${username}`);\r\n\t\t\t\tsetUser(res.data); \r\n\t\t\t}\r\n\t\t\tcatch (error) {\r\n\t\t\t\tconsole.log(error.message); \r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [username, history]);\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst call = async () => {\r\n\t\t\tconst updatedUser = {\r\n\t\t\t\tuserId: currentUserId,\r\n\t\t\t}\r\n\t\t\tif (coverPic) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst coverPicName = Date.now() + coverPic.name\r\n\t\t\t\t\tconst uploadTask = storage.ref(`${user.username}/coverPic/${coverPicName}`).put(coverPic);\r\n\t\t\t\t\tawait uploadTask.on(\"state_changed\", snapshot => { }, error => { console.log(error); },\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tawait storage.ref(`${user.username}/coverPic`).child(coverPicName).getDownloadURL().then((imgurl) => { updatedUser.coverPicture = imgurl })\r\n\t\t\t\t\t\t\tawait userRequest.put(\"/users/\" + user._id, updatedUser);\r\n\t\t\t\t\t\t\tsetCoverPic(null)\r\n\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tcatch (error) {\r\n\t\t\t\t\tconsole.log(error.message) \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (profilePic) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst profilePicName = Date.now() + profilePic.name\r\n\t\t\t\t\tconst uploadTask = storage.ref(`${user.username}/profilePic/${profilePicName}`).put(profilePic);\r\n\t\t\t\t\tawait uploadTask.on(\"state_changed\", snapshot => { }, error => { console.log(error); },\r\n\t\t\t\t\t\tasync () => {\r\n\t\t\t\t\t\t\tawait storage.ref(`${user.username}/profilePic`).child(profilePicName).getDownloadURL().then((imgurl) => { updatedUser.profilePicture = imgurl })\r\n\t\t\t\t\t\t\tawait userRequest.put(\"/users/\" + user._id, updatedUser);\r\n\t\t\t\t\t\t\tsetProfilePic(null)\r\n\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tcatch (error) {\r\n\t\t\t\t\tconsole.log(error.message) \r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tcall();\r\n\t}, [coverPic, profilePic, currentUserId, history, user._id, user.username]);\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t{ currentUserId === userId ?\r\n\t\t\t<div className=\"profile-top-btn-container\">\r\n\t\t\t\t<label htmlFor=\"cover-pic\" className=\"profile-top-btn\">\r\n\t\t\t\t\t<i className=\"fas fa-images\"></i>\r\n\t\t\t\t\tChange Cover\r\n\t\t\t\t\t<input type=\"file\" name=\"cover-pic\" id=\"cover-pic\" style={{ display: \"none\" }} className=\"change-cover\" onChange={(e) => setCoverPic(e.target.files[0])} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<label htmlFor=\"profile-pic\" className=\"profile-top-btn\">\r\n\t\t\t\t\t<i className=\"fas fa-user\"></i>\r\n\t\t\t\t\tChange Profile\r\n\t\t\t\t\t<input type=\"file\" name=\"profile-pic\" id=\"profile-pic\" style={{ display: \"none\" }} className=\"profile-cover\" onChange={(e) => setProfilePic(e.target.files[0])} />\r\n\t\t\t\t</label>\r\n\t\t\t\t<Link to=\"/updateInfo\">\r\n\t\t\t\t\t<button className=\"profile-top-btn cover-pic\"> <i className=\"fas fa-pen\"></i> Update Info</button>\r\n\t\t\t\t</Link>\r\n\t\t\t</div>\r\n\t\t\t:\r\n\t\t\t''\r\n\t\t}\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default UpdateProfileBtn\r\n","import React, { useEffect, useState } from 'react'\r\nimport { Link } from \"react-router-dom\"\r\nimport \"./ProfileRightbar.css\"\r\nimport { Add, Remove } from \"@material-ui/icons\";\r\nimport CloseFriend from '../CloseFriend/CloseFriend';\r\nimport { useSelector, useDispatch } from \"react-redux\"\r\nimport { userRequest } from '../../requestMethod';\r\nimport { follow } from \"../../redux/exportAllAction\"\r\nimport { unfollow } from \"../../redux/exportAllAction\"\r\nimport UpdateProfileBtn from '../UpdateProfileBtn/UpdateProfileBtn';\r\nfunction ProfileRightbar({ user }) {\r\n\t//fetching reduxState\r\n\tconst dispatch = useDispatch()\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst socket = useSelector(state => state.socket.socket)\r\n\t//fetched reduxState\r\n\tconst [followed, setFollowed] = useState(user.followers.includes(currentUserId));\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\tconst [followings, setFollowings] = useState([])\r\n\tconst [followers, setFollowers] = useState([])\r\n\r\n\r\n\tconst handleFollow = async () => {\r\n\t\ttry {\r\n\t\t\tif (followed) {\r\n\t\t\t\tawait userRequest.put(\"/users/\" + user._id + \"/\" + currentUserId + \"/unfollow\")\r\n\t\t\t\tdispatch(unfollow(user._id))\r\n\t\t\t\tsocket?.emit(\"sendNotification\", {\r\n\t\t\t\t\treceiverId: user?._id,\r\n\t\t\t\t\tsenderId: currentUserId,\r\n\t\t\t\t\ttext: \"unfollow you\",\r\n\t\t\t\t\ttype: \"unfollow\"\r\n\t\t\t\t})\r\n\t\t\t\tsetFollowed(!followed);\r\n\t\t\t\tsetFollowers(followers.filter(fid => fid !== currentUserId))\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tawait userRequest.put(\"/users/\" + user._id + \"/\" + currentUserId + \"/follow\")\r\n\t\t\t\tdispatch(follow(user._id))\r\n\t\t\t\tsocket?.emit(\"sendNotification\", {\r\n\t\t\t\t\treceiverId: user?._id,\r\n\t\t\t\t\tsenderId: currentUserId,\r\n\t\t\t\t\ttext: \"started following you\",\r\n\t\t\t\t\ttype: \"unfollow\"\r\n\t\t\t\t})\r\n\t\t\t\tsetFollowed(!followed);\r\n\t\t\t\tsetFollowers([...followers, currentUserId])\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error.message);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tuseEffect(() => {\r\n\t\tconst fetchFollowings = async () => {\r\n\t\t\tconst res1 = await userRequest.get(\"/users/followings/\" + user._id)\r\n\t\t\tconst res2 = await userRequest.get(\"/users/followers/\" + user._id)\r\n\t\t\tsetFollowings(res1.data)\r\n\t\t\tsetFollowers(res2.data)\r\n\t\t\tsetLoaded(true)\r\n\t\t}\r\n\t\tfetchFollowings()\r\n\t}, [user]);\r\n\r\n\r\n\treturn loaded && (\r\n\t\t<div className=\"profile-rightbar\">\r\n\t\t\t<div className=\"profile-rightbar-wrapper\">\r\n\t\t\t\t{/* update btn section  */}\r\n\t\t\t\t<UpdateProfileBtn userId={user._id} />\r\n\t\t\t\t{user._id !== currentUserId ?\r\n\t\t\t\t\t<button className=\"follow-btn\" onClick={handleFollow}>\r\n\t\t\t\t\t\t{followed ? <i className=\"fas fa-user-minus\" >  UnFollow</i> : <i className=\"fas fa-user-plus\"> Follow</i>}\r\n\t\t\t\t\t\t{/* {followed ? \"UnFollow \" : \"Follow\"} */}\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t: ''}\r\n\r\n\t\t\t\t{/* about section */}\r\n\t\t\t\t<div className=\"user-info\">\r\n\t\t\t\t\t<div className=\"title\"><i className=\"far fa-address-card\" style={{ fontSize: \"25px\" }} ></i> About {user.name}</div>\r\n\t\t\t\t\t{!user.work && !user.school && !user.from && !user.live && !user.relationship && <div>This User Information not available</div>}\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.work ? <span ><i className=\"fas fa-briefcase\"></i> Work at <b>{user.work}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.school ? <span ><i className=\"fas fa-university\"></i> Studied at <b>{user.school}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.from ? <span ><i className=\"fas fa-globe-americas\"></i> From <b>{user.from}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.live ? <span > <i className=\"fas fa-building\"></i> Live in <b>{user.live}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.relationship ? <span><i className=\"fas fa-heart\"></i> Relationship Status <b>{user.relationship === 1 ? \"Single ()\" : user.relationship === 2 ? \"In RelationShip ()\" : \"Complicated ()\"}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"info\">\r\n\t\t\t\t\t\t{user.birthday ? <span><i className=\"fas fa-birthday-cake\"></i> Birthday on <b>{user.birthday}</b> </span> : ''}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<hr />\r\n\r\n\r\n\t\t\t\t{/* follower nd following section */}\r\n\t\t\t\t<div className=\"title\"><i className=\"fas fa-users\" style={{ fontSize: \"25px\" }}></i> {user.name} following <span className=\"follower-following-counter\">({followings.length})</span></div>\r\n\t\t\t\t<div className=\"user-friend-container\">\r\n\t\t\t\t\t{followings.length !== 0 ?\r\n\t\t\t\t\t\tfollowings.slice(0, 3).map((followingId) => <CloseFriend key={followingId} className=\"user-friend-item\" userId={followingId} />) :\r\n\t\t\t\t\t\t'No Following'\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link className='text-link' to={{ pathname: `/friendPage`, search: `type=followings?userName=${user?.name}`, state: { usersId: followings } }} >\r\n\t\t\t\t\t<button className=\"show-all\">Show All</button>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t\t<hr />\r\n\r\n\t\t\t\t<div className=\"title\"><i className=\"fas fa-users\" style={{ fontSize: \"25px\" }}></i> {user.name} follower <span className=\"follower-following-counter\">({followers.length})</span></div>\r\n\t\t\t\t<div className=\"user-friend-container\">\r\n\t\t\t\t\t{followers.length !== 0 ?\r\n\t\t\t\t\t\tfollowers.slice(0, 3).map((followerId) => <CloseFriend key={followerId} className=\"user-friend-item\" userId={followerId} />) :\r\n\t\t\t\t\t\t'No Follower'\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t<Link className='text-link' to={{ pathname: `/friendPage`, search: `type=followers?userName=${user?.name}`, state: { usersId: followers } }} >\r\n\t\t\t\t\t<button className=\"show-all\">Show All</button>\r\n\t\t\t\t</Link>\r\n\r\n\t\t\t</div>\r\n\t\t</div >\r\n\t)\r\n}\r\n\r\nexport default ProfileRightbar\r\n","import React, { useEffect, useState } from 'react'\r\nimport \"./Profile.css\"\r\nimport { Link } from \"react-router-dom\"\r\nimport Topbar from '../../component/Topbar/Topbar';\r\nimport Sidebar from '../../component/Sidebar/Sidebar';\r\nimport Feed from '../../component/Feed/Feed';\r\nimport ProfileRightbar from '../../component/ProfileRightbar/ProfileRightbar';\r\nimport { useParams } from 'react-router';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux'\r\nimport { userRequest } from '../../requestMethod';\r\n\r\nfunction Profile() {\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst history = useHistory();\r\n\tconst params = useParams();\r\n\tconst username = params.username;\r\n\tconst [user, setUser] = useState({});\r\n\tconst [loaded, setLoaded] = useState(false)\r\n\r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(`/users?username=${username}`);\r\n\t\t\t\tsetUser(res.data);\r\n\t\t\t\tsetLoaded(true)\r\n\t\t\t}\r\n\t\t\tcatch (error) { \r\n\t\t\t\tsetLoaded(true)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [username, history]);\r\n\r\n\treturn loaded && (\r\n\t\t<>\r\n\t\t\t<Topbar />\r\n\t\t\t<div className=\"profile\">\r\n\t\t\t\t<Sidebar />\r\n\t\t\t\t<div className=\"profile-right\">\r\n\r\n\t\t\t\t\t<div className=\"profile-right-top\">\r\n\t\t\t\t\t\t<div className=\"profile-cover\">\r\n\t\t\t\t\t\t\t<img src={user.coverPicture ? user.coverPicture : PF + \"/person/noCover.png\"} alt=\"profileCoverPhoto\" className=\"profile-cover-photo\" />\r\n\t\t\t\t\t\t\t<img src={user.profilePicture ? user.profilePicture : PF + \"/person/noAvatar.png\"} alt=\"profilePhoto\" className=\"profile-photo\" />\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"profile-info\">\r\n\t\t\t\t\t\t\t<h4 className=\"name\">{user.name}</h4>\r\n\t\t\t\t\t\t\t<div className=\"desc\">{user.desc}</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t\t\t<div className=\"profile-right-bottom\">\r\n\t\t\t\t\t\t\t<Feed username={user.username} />\r\n\t\t\t\t\t\t\t<ProfileRightbar user={user} />\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default Profile\r\n","import { REGISTER_FAIL, REGISTER_START, REGISTER_SUCCESS } from \"./userType\"; \r\nimport { publicRequest } from \"../../requestMethod\";\r\n\r\nexport const registerStart=()=>({\r\n\ttype:REGISTER_START\r\n})\r\nexport const registerSuccess=(userId)=>({\r\n\ttype:REGISTER_SUCCESS,\r\n\tpayload: userId\r\n})\r\n\r\nexport const registerFail=()=>({\r\n\ttype:REGISTER_FAIL\r\n\t\r\n})\r\n\r\nexport const register=(userDetail)=>{\r\n\treturn async(dispatch)=>{\r\n\t\tawait dispatch(registerStart());\r\n\t\ttry {\r\n\t\t\tconst res= await publicRequest.post(\"/auth/register\",userDetail);\r\n\t\t\tconst user =res.data;  \r\n\t\t\tlocalStorage.setItem(\"accessToken\",user.accessToken);\r\n\t\t\tlocalStorage.setItem(\"refreshToken\",user.refreshToken);\r\n\t\t\tdispatch(registerSuccess(user._id));\r\n\t\t} catch (error) {\r\n\t\t\tdispatch(registerFail())\r\n\t\t}\r\n\t}\r\n}\r\n","import React, { useRef, useState  } from 'react'\r\nimport \"./Register.css\" \r\nimport { useHistory } from \"react-router\";\r\nimport {Link} from \"react-router-dom\";\r\nimport { useDispatch } from 'react-redux';\r\nimport { register } from '../../redux/User/userRegisterAction';\r\nimport { publicRequest } from '../../requestMethod';\r\n\r\n\r\nfunction Register() {\r\n\t\r\n\tconst dispatch = useDispatch();\r\n\tconst history=useHistory();\r\n\tconst username = useRef()\r\n\tconst email = useRef(\"\")\r\n\tconst password = useRef()\r\n\tconst comfirmPassword=useRef();\r\n\tconst otp = useRef(\"\")\r\n\tconst [otpSend, setOtpSend] = useState(false);\r\n\tconst [otpVerified , setOtpVerified] =useState(false);\r\n\tconst [otpCounter , setOtpCounter] =useState(30);\r\n\tconst [error, setError] = useState(\"\");\r\n\tconst [success, setSuccess] = useState(\"\");\r\n\t\r\n\r\n\tconst handleSubmit= async(e)=>{\r\n\t\te.preventDefault();\r\n\t\tconsole.log(password.current.value,comfirmPassword.current.value)\r\n\t\tconsole.log(password.current.value===comfirmPassword.current.value)\r\n\t\tif(password.current.value!==comfirmPassword.current.value){\r\n\t\t\tsetError(\"password do not match \")\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconst user={\r\n\t\t\t\tusername:username.current.value,\r\n\t\t\t\temail:email.current.value,\r\n\t\t\t\tpassword:password.current.value\r\n\t\t\t}\t\t\r\n\t\t\ttry {\r\n\t\t\t\tawait dispatch(register(user)) \r\n\t\t\t\thistory.push(\"/updateInfo\");\r\n\t\t\t} catch(error) {\r\n\t\t\t\tsetError(error.message);\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\t\r\n\t}\r\n\r\n\tconst handleSendOtp=async()=>{\r\n\t\ttry {\r\n\t\t\t//send otp to email\r\n\t\t\tconst res=await publicRequest.get(\"/otp/gernate/\"+email.current.value);\r\n\t\t\tconsole.log(res.data)\r\n\t\t\tsetOtpSend(true);\r\n\t\t\tconst myInterval = setInterval(() => {\r\n\t\t\t\tsetOtpCounter(prev=>prev-1);\r\n\t\t\t}, 1000);\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tsetOtpSend(false);\r\n\t\t\t\tsetOtpCounter(30)\r\n\t\t\t\tclearInterval(myInterval);\r\n\t\t\t}, 30000);\r\n\t\t} catch(error) {\r\n\t\t\tsetError(error.message);\r\n\t\t\tconsole.log(error);\t\r\n\t\t}\r\n\t}\r\n\tconst handleVerifyOtp=async()=>{\r\n\t\ttry {\r\n\t\t\tconsole.log({email: email.current.value , otp : otp.current.value});\r\n\t\t\tconst res =await publicRequest.post(\"/otp/verify\",{email: email.current.value , otp : otp.current.value})\r\n\t\t\tsetError(res.data);\r\n\t\t\tsetOtpVerified(true);\r\n\t\t} catch(error) {\r\n\t\t\tsetError(error.message)\r\n\t\t\tif(error.response) {\r\n\t\t\t\tsetError(error.response.data);\r\n\t\t\t\tconsole.log(error.response.data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tconst handleEmailChange=()=>{\r\n\t\tsetOtpSend(false);\r\n\t\tsetOtpVerified(false);\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"register\">\r\n\t\t\t<div className=\"register-wrapper\">\r\n\t\t\t\t<div className=\"register-left\">\r\n\t\t\t\t\t<div className=\"logo\">Socialify</div>\r\n\t\t\t\t\t<div className=\"desc\">Connect to friend and the world around you on Socialify</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"register-right\">\r\n\t\t\t\t\t{error && error}\r\n\t\t\t\t\t<form onSubmit={handleSubmit} className=\"register-form\">\r\n\t\t\t\t\t\t<input  type=\"text\" placeholder=\"Username\" required ref={username} />\r\n\t\t\t\t\t\t<div className='inputAndBtn'>\r\n\t\t\t\t\t\t\t<input  type=\"email\" onChange={handleEmailChange} placeholder=\"email\" required ref={email} />\r\n\t\t\t\t\t\t\t{ (!otpSend&&!otpVerified) && <button type=\"button\" className='otp-btn' onClick={handleSendOtp}>Send OTP</button>}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{ (otpSend||otpVerified )&&\r\n\t\t\t\t\t\t\t\t\t<div className='inputAndBtn'> \r\n\t\t\t\t\t\t\t\t\t\t<input  type=\"text\" placeholder=\"OTP\" required ref={otp} /> \r\n\t\t\t\t\t\t\t\t\t\t{!otpVerified && <button type=\"button\" onClick={handleVerifyOtp} className='otp-btn'>Verify OTP {otpCounter}</button> }\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<input  type=\"password\" placeholder=\"Password\" required minLength=\"6\" ref={password} />\r\n\t\t\t\t\t\t<input  type=\"password\" placeholder=\"Comfirm Password\" required ref={comfirmPassword} />\r\n\t\t\t\t\t\t<button type=\"submit\"  className=\"submit-btn register-btn\" disabled={!otpVerified}>Sign Up</button>\r\n\t\t\t\t\t\t{/* <span className=\"forget-password\">Forget Password</span> */}\r\n\t\t\t\t\t\t<Link className='text-link' to=\"/login\"><button className=\"submit-btn login-btn\">LogIn</button></Link>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Register\r\n","import React, { useEffect, useState } from 'react'\r\nimport { useSelector } from \"react-redux\"\r\nimport \"./UserItem.css\"\r\nimport { userRequest } from '../../requestMethod'\r\nimport { useDispatch } from 'react-redux'\r\nimport { follow, unfollow, updateFollowing } from '../../redux/exportAllAction'\r\nimport { Link } from '@material-ui/core'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\n\r\nfunction UserItem({ userId }) {\r\n\tconst history=useHistory();\r\n\t//fetching currentuser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\t//fetched currentUser\r\n\r\n\tlet PF = process.env.REACT_APP_PUBLIC_FOLDER;\r\n\tif(process.env.NODE_ENV===\"production\"){\r\n\t\tPF=process.env.REACT_APP_PUBLIC_FOLDER_DEPLOY\r\n\t}\r\n\tconst dispatch = useDispatch();\r\n\tconst followings = useSelector(state => state.following.usersId);\r\n\t//updateFollowing\r\n\tuseEffect(() => {\r\n\t\tconst fetchFollowings = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users/followings/\" + currentUserId)\r\n\t\t\t\tdispatch(updateFollowing(res.data))\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchFollowings()\r\n\t}, [currentUserId, dispatch])\r\n\r\n\t//fetch user\r\n\tconst [user, setUser] = useState();\r\n\tuseEffect(() => {\r\n\t\tconst fetchUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\" + userId)\r\n\t\t\t\tsetUser(res.data)\r\n\t\t\t\tsetFollowed(res.data.followers.includes(currentUserId))\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t}, [userId, currentUserId])\r\n\r\n\tconst [followed, setFollowed] = useState(user?.followers.includes(currentUserId))\r\n\r\n\r\n\r\n\tconst handleClick = async () => {\r\n\t\ttry {\r\n\t\t\tif (followed) {\r\n\t\t\t\tawait userRequest.put(\"/users/\" + userId + \"/\" + currentUserId + \"/unfollow\")\r\n\t\t\t\tdispatch(unfollow(userId))\r\n\t\t\t\tsetFollowed(!followed);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tawait userRequest.put(\"/users/\" + userId + \"/\" + currentUserId + \"/follow\")\r\n\t\t\t\tdispatch(follow(userId))\r\n\t\t\t\tsetFollowed(!followed);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"friendMenuItem\">\r\n\t\t\t\t<div className=\"friendMenuItemImgContainer\">\r\n\t\t\t\t\t<img src={user?.profilePicture ? user?.profilePicture : PF + \"/person/noAvatar.png\"} alt=\"\" className=\"friendMenuItemImg\" />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"friendMenuItemContent\">\r\n\t\t\t\t\t<div className=\"friendMenuItemLeft\">\r\n\t\t\t\t\t\t<div className=\"top\"><b>{user?.name}</b></div>\r\n\t\t\t\t\t\t<div className=\"bottom\">\r\n\t\t\t\t\t\t\t<div className=\"from info-item\"><i className=\"fas fa-building\"></i> {user?.from}</div>\r\n\t\t\t\t\t\t\t<div className=\"work info-item\"><i className=\"fas fa-briefcase\"></i> {user?.work}</div>\r\n\t\t\t\t\t\t\t<div className=\"work info-item\"><i className=\"fas fa-university\"></i> {user?.school}</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"friendMenuItemRight\">\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tuserId !== currentUserId ?\r\n\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t<button onClick={handleClick} className='friendMenuItemRightButton'>\r\n\t\t\t\t\t\t\t\t\t{followed ?  <i className=\"fas fa-user-minus\" >  UnFollow</i> :   <i className=\"fas fa-user-plus\"> Follow</i> }\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<button className='friendMenuItemRightButton' onClick={()=>history.push(`/profile/${user?.username}`)}> <i className=\"fas fa-user-alt\"></i> Profile</button>\r\n\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default UserItem;\r\n","import React, { useEffect, useState } from 'react'\r\nimport \"./FriendPage.css\"\r\nimport {  useLocation } from \"react-router-dom\";\r\nimport Topbar from \"../../component/Topbar/Topbar\"\r\nimport UserItem from \"../../component/UserItem/UserItem\"\r\n \r\nimport {useSelector } from \"react-redux\"  \r\nimport { userRequest } from '../../requestMethod';\r\n\r\nfunction FriendPage() {\r\n\t//fetching currentUser\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\t//fetched currentUser \r\n\tlet location = useLocation();\r\n\tconsole.log(location);\r\n\tconst type = location.search?.split(\"?\")[1]?.split(\"=\")[1];\r\n\tconst userName = location.search?.split(\"?\")[2]?.split(\"=\")[1]\t;\r\n\tconst [displayUsers, setDisplayUsers] = useState([]) \r\n\t\r\n\tuseEffect(() => {\r\n\t\tconst fetchAllUser = async () => {\r\n\t\t\ttry {\r\n\t\t\t\tif (type===\"all\") {\r\n\t\t\t\t\tconst res = await userRequest.get(\"/users/allUsers\", { userId: currentUserId })\r\n\t\t\t\t\tsetDisplayUsers(res.data.map( u => {\r\n\t\t\t\t\t\tif(u._id !== currentUserId) \r\n\t\t\t\t\t\t\treturn u._id\r\n\t\t\t\t\t\treturn u._id;\r\n\t\t\t\t\t} \r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsetDisplayUsers(location.state.usersId)\r\n\t\t\t\t}\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.log(error)\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchAllUser()\r\n\t}, [currentUserId, location.state?.usersId ,type ])\r\n\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Topbar />\r\n\t\t\t<div className=\"friendMenuContainer\">\r\n\t\t\t\t<div className=\"friendMenuWrapper\">\r\n\t\t\t\t\t<h2>{userName} {type}</h2>\r\n\t\t\t\t\t{ \r\n\t\t\t\t\t\tdisplayUsers.length===0? \"No one to show\" : \r\n\t\t\t\t\t\tdisplayUsers?.map((userId) => <UserItem userId={userId} key= {userId} /> )\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\r\n\t\t</>\r\n\t)\r\n}\r\n\r\nexport default FriendPage\r\n","import React, { useRef, useState } from 'react'\r\nimport Topbar from \"../../component/Topbar/Topbar\" \r\nimport \"./UpdateInfo.css\"\r\nimport { useHistory } from 'react-router';\r\n\r\nimport { useEffect } from \"react\"; \r\nimport { useSelector } from 'react-redux'\r\nimport { userRequest } from '../../requestMethod';\r\n\r\n\r\nfunction UpdateInfo() {\r\n\tconst followings = useSelector(state => state.following.usersId)\r\n\tconst userState = useSelector(state => state.user)\r\n\tconst currentUserId = userState.currentUserId;\r\n\tconst [currentUser, setCurrentUser]= useState(null);\r\n\t//fetching currentUser\r\n\tuseEffect(()=>{\r\n\t\tconst fetchUser=async()=>{\r\n\t\t\ttry {\r\n\t\t\t\tconst res = await userRequest.get(\"/users?userId=\"+currentUserId); \r\n\t\t\t\tsetCurrentUser(res.data);\r\n\t\t\t} catch(error) {\r\n\t\t\t\tconsole.log(error);\r\n\t\t\t}\r\n\t\t}\r\n\t\tfetchUser();\r\n\t},[currentUserId,setCurrentUser])\r\n\t//feched currentUser\r\n\r\n\tconst [updated,setUpdated]=useState()\r\n\tconst name = useRef();\r\n\tconst from = useRef();\r\n\tconst live = useRef();\r\n\tconst work = useRef();\r\n\tconst school = useRef();\r\n\tconst relationship = useRef();\r\n\tconst birthday = useRef();\r\n\tconst desc = useRef();\r\n\tconst history=useHistory();\r\n\r\n\tconst handleSubmit=async (e)=>{\r\n\t\te.preventDefault()\r\n\t\tconst body={\r\n\t\t\tuserId:currentUserId,\r\n\t\t\tname:name.current.value,\r\n\t\t\tfrom:from.current.value,\r\n\t\t\tlive:live.current.value,\r\n\t\t\twork:work.current.value,\r\n\t\t\tschool:school.current.value,\r\n\t\t\tdesc:desc.current.value,\r\n\t\t\trelationship:relationship.current \r\n\t\t}\r\n\t\tconsole.log(body)\r\n\t\ttry {\r\n\t\t\tconst res =await userRequest.put(\"/users/\"+currentUserId,body);\r\n\t\t\tsetUpdated(true) \r\n\t\t\tfollowings.length>0 ? history.push(\"/profile/\"+currentUser?.username) :history.push(\"/friendPage?type=all\") \r\n\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error)\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\n\r\n\treturn (\r\n\t\t<div className='updateProfileContainer'>\r\n\t\t\t<Topbar />\r\n\t\t\t<div className=\"profile-update\">\r\n\r\n\t\t\t\t{updated ? \"the profile Infomation is now updated\" : ''}\r\n\r\n\t\t\t\t<form className=\"profile-update-form\" onSubmit={handleSubmit}>\r\n\t\t\t\t\t<input type=\"text\" ref={name} placeholder=\"Name\" defaultValue={currentUser?.name} required/>\r\n\t\t\t\t\t<div className=\"birthday\">\r\n\t\t\t\t\t\t<label htmlFor=\"birthday\" className='birthday-label'>Date of Birth    :</label>\r\n\t\t\t\t\t\t<input type=\"date\" ref={birthday} placeholder=\"birthday\" defaultValue={currentUser?.birthday} />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<input type=\"text\" ref={from} placeholder=\"From\" defaultValue={currentUser?.from} required />\r\n\t\t\t\t\t<input type=\"text\" ref={live} placeholder=\"Live\" defaultValue={currentUser?.live} required />\r\n\t\t\t\t\t<input type=\"text\" ref={work} placeholder=\"Work\" defaultValue={currentUser?.work} required />\r\n\t\t\t\t\t<input type=\"text\" ref={school} placeholder=\"School\" defaultValue={currentUser?.school} required />\r\n\r\n\t\t\t\t\t<h3>Relationship Status</h3>\r\n\t\t\t\t\t<div className=\"relationshipStatus\">\r\n\t\t\t\t\t\t<label htmlFor=\"single\"><span> Single </span><input type=\"radio\" name=\"relationship\" id=\"single\" value=\"1\" onChange={(e)=>relationship.current=e.target.value }/> </label>\r\n\t\t\t\t\t\t<label htmlFor=\"inRelationship\"> In a relationship <input type=\"radio\" name=\"relationship\" id=\"inRelationship\" value=\"2\" onChange={(e)=>relationship.current=e.target.value }/>  </label>\r\n\t\t\t\t\t\t<label htmlFor=\"complicated\"> Complicated <input type=\"radio\" name=\"relationship\" id=\"complicated\" value=\"3\" onChange={(e)=>relationship.current=e.target.value } /> </label>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<textarea name=\"\" id=\"\" cols=\"30\" rows=\"5\" ref={desc} placeholder=\"Write Something About You Here\" defaultValue={currentUser?.desc} required ></textarea>\r\n\t\t\t\t\t<button type=\"submit\">Save</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default UpdateInfo\r\n","import React  from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\"; \r\nimport Chat from './pages/Chat/Chat';\r\nimport Error from './pages/Error/Error';\r\nimport Home from './pages/Home/Home';\r\nimport Login from './pages/Login/Login';\r\nimport Profile from './pages/Profile/Profile';\r\nimport Register from './pages/Register/Register';\r\nimport FriendPage from \"./pages/FriendPage/FriendPage\";\r\nimport UpdateInfo from \"./pages/UpdateInfo/UpdateInfo\";\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { io } from 'socket.io-client';\r\nimport { useEffect } from 'react';\r\nimport { setSocket } from './redux/exportAllAction';\r\nimport \"./App.css\"\r\n\r\nfunction App() {\r\n  const dispatch = useDispatch();\r\n  const userState = useSelector(state => state.user)\r\n  const currentUserId = userState.currentUserId;\r\n  useEffect(()=>{\r\n    if(currentUserId){\r\n      let socket;\r\n      if(process.env.NODE_ENV===\"production\"){\r\n        socket = io(\"https://socialifyappsocket.herokuapp.com/\");\r\n      }\r\n      else{\r\n        socket= io(\"http://localhost:8900/\")\r\n      }\r\n      socket?.emit(\"addUser\",currentUserId);\r\n      dispatch(setSocket(socket));\r\n    }\r\n  },[dispatch, currentUserId]);\r\n  \r\n  return (\r\n    <Router>\r\n      <Switch>\r\n          <Route path=\"/\" exact > {currentUserId? <Home /> : <Login />}</Route>\r\n          <Route path=\"/profile/:username\" exact > {currentUserId? <Profile /> : <Login /> }  </Route>\r\n          <Route path=\"/login\" exact >{currentUserId? <Home /> : <Login /> }</Route>\r\n          <Route path=\"/register\" exact > {currentUserId? <Home /> : <Register />}</Route>\r\n          <Route path=\"/chat\" exact > {currentUserId? <Chat /> : <Register />}</Route>\r\n          <Route path=\"/friendPage\" exact > {currentUserId? <FriendPage /> : <Register />}</Route>\r\n          <Route path=\"/updateInfo\" exact > {currentUserId? <UpdateInfo /> : <Register />}</Route>\r\n          <Route path=\"/error\" exact > <Error/> </Route>\r\n      </Switch>\r\n    </Router>\r\n  )\r\n}\r\n\r\nexport default App;\r\n","import { SET_SOCKET } from \"./socketType\"\r\n\r\nexport const setSocket = (socket)=>({\r\n\ttype:SET_SOCKET,\r\n\tpayload:socket\r\n})\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom'; \r\nimport App from './App';\r\n\r\nimport { Provider } from 'react-redux'\r\nimport { PersistGate } from \"redux-persist/integration/react\"\r\nimport { store, persistor } from \"./redux/store\"\r\n\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<PersistGate persistor={persistor} >\r\n\t\t\t<App />\r\n\t\t</PersistGate>\r\n\t</Provider>\r\n\t, document.getElementById('root'));"],"sourceRoot":""}